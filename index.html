<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DÄ°REN | AkÄ±llÄ± Gaz Takip Sistemi</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        :root { --primary: #0ea5e9; --secondary: #6366f1; --dark: #0f172a; }
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #334155; -webkit-overflow-scrolling: touch; }
        h1, h2, h3, h4, h5 { font-family: 'Plus Jakarta Sans', sans-serif; }
        
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        
        .fade-in { animation: fadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .glass { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(226, 232, 240, 0.8); }
        .nav-item.active { background-color: #e0f2fe; color: #0284c7; font-weight: 600; }
        .nav-item.active i { color: #0284c7; }
        .bubble-user { background: linear-gradient(135deg, #0ea5e9, #2563eb); color: white; border-radius: 16px 16px 0 16px; }
        .bubble-ai { background: white; border: 1px solid #e2e8f0; color: #1e293b; border-radius: 16px 16px 16px 0; }
        
        pre { background: #1e293b !important; color: #e2e8f0; padding: 0.75rem; border-radius: 0.5rem; overflow-x: auto; font-size: 0.75rem; font-family: 'Fira Code', monospace; }
        code { color: #38bdf8; }

        .typing-dot { animation: typing 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        
        /* Accordion Animasyonu */
        .details-content { transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out; max-height: 0; opacity: 0; overflow: hidden; }
        .details-content.open { max-height: 600px; opacity: 1; }
    </style>
</head>
<body class="flex flex-col min-h-screen pb-24 md:pb-0">

    <header class="fixed top-0 w-full z-50 glass shadow-sm transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 h-16 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-9 h-9 md:w-10 md:h-10 rounded-xl bg-gradient-to-br from-sky-500 to-indigo-600 flex items-center justify-center text-white shadow-lg shadow-sky-200 shrink-0">
                    <i class="ri-sensor-line text-lg md:text-xl"></i>
                </div>
                <div class="leading-tight">
                    <h1 class="text-base md:text-lg font-bold text-slate-800">DÄ°REN</h1>
                    <p class="text-[9px] md:text-[10px] uppercase tracking-wider text-slate-500 font-bold">Gaz Tespit Ar-Ge</p>
                </div>
            </div>
            <nav class="hidden md:flex items-center space-x-1 bg-slate-100/50 p-1 rounded-xl">
                <button onclick="app.nav('overview')" id="d-overview" class="nav-item px-4 py-2 rounded-lg text-sm font-medium text-slate-500 transition-all hover:bg-white">Genel BakÄ±ÅŸ</button>
                <button onclick="app.nav('analysis')" id="d-analysis" class="nav-item px-4 py-2 rounded-lg text-sm font-medium text-slate-500 transition-all hover:bg-white">Gaz & SensÃ¶r</button>
                <button onclick="app.nav('hardware')" id="d-hardware" class="nav-item px-4 py-2 rounded-lg text-sm font-medium text-slate-500 transition-all hover:bg-white">DonanÄ±m</button>
                <button onclick="app.nav('software')" id="d-software" class="nav-item px-4 py-2 rounded-lg text-sm font-medium text-slate-500 transition-all hover:bg-white">YazÄ±lÄ±m & Plan</button>
                <button onclick="app.nav('ai')" id="d-ai" class="ml-2 px-4 py-2 rounded-lg text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 shadow-md shadow-indigo-200 transition-all flex items-center gap-2">
                    <i class="ri-sparkling-fill"></i> Asistan
                </button>
            </nav>
        </div>
    </header>

    <main class="flex-grow max-w-7xl mx-auto w-full px-4 md:px-6 pt-20 md:pt-24 pb-6 space-y-6">

        <section id="s-overview" class="fade-in space-y-5">
            <div class="bg-slate-900 rounded-2xl md:rounded-3xl p-6 md:p-12 text-white relative overflow-hidden shadow-xl shadow-slate-200">
                <div class="absolute top-0 right-0 w-64 h-64 md:w-96 md:h-96 bg-sky-500 rounded-full mix-blend-overlay filter blur-3xl opacity-20 -mr-16 -mt-16 pointer-events-none"></div>
                <div class="relative z-10 max-w-3xl">
                    <span class="inline-flex items-center gap-1.5 py-1 px-2.5 rounded-full bg-sky-500/20 border border-sky-500/30 text-sky-300 text-[10px] md:text-xs font-bold mb-4 backdrop-blur-sm">
                        <i class="ri-file-list-3-line"></i> TEKNÄ°K RAPOR Ã–ZETÄ°
                    </span>
                    <h2 class="text-2xl md:text-5xl font-bold mb-4 md:mb-6 leading-tight">Yeni Nesil Klima GazÄ± <br><span class="text-sky-400">KaÃ§ak Tespit Sistemi</span></h2>
                    <p class="text-slate-300 text-sm md:text-lg leading-relaxed mb-6 md:mb-8">
                        Ãœniversite kampÃ¼sleri ve kritik altyapÄ±lar iÃ§in, Ã¶zellikle <strong>R-32 ve R-410A</strong> gibi yeni nesil soÄŸutucu akÄ±ÅŸkanlarÄ± tespit eden, yanlÄ±ÅŸ alarmlardan arÄ±ndÄ±rÄ±lmÄ±ÅŸ gÃ¼venlik sistemi.
                    </p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 text-center md:text-left">
                        <div class="bg-white/5 p-3 rounded-lg md:bg-transparent md:p-0"><div class="text-2xl md:text-3xl font-bold text-sky-400">A2L</div><div class="text-[10px] md:text-xs text-slate-400 uppercase tracking-wide mt-1">Hedef Gaz</div></div>
                        <div class="bg-white/5 p-3 rounded-lg md:bg-transparent md:p-0"><div class="text-2xl md:text-3xl font-bold text-sky-400">%14.4</div><div class="text-[10px] md:text-xs text-slate-400 uppercase tracking-wide mt-1">R-32 LFL Limiti</div></div>
                        <div class="bg-white/5 p-3 rounded-lg md:bg-transparent md:p-0"><div class="text-2xl md:text-3xl font-bold text-sky-400">IoT</div><div class="text-[10px] md:text-xs text-slate-400 uppercase tracking-wide mt-1">MQTT & Flutter</div></div>
                        <div class="bg-white/5 p-3 rounded-lg md:bg-transparent md:p-0"><div class="text-2xl md:text-3xl font-bold text-sky-400">12</div><div class="text-[10px] md:text-xs text-slate-400 uppercase tracking-wide mt-1">HaftalÄ±k Plan</div></div>
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div class="bg-white p-5 md:p-6 rounded-2xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-slate-800 text-base md:text-lg mb-2 flex items-center gap-2"><div class="p-1.5 bg-orange-100 rounded text-orange-600"><i class="ri-alert-fill"></i></div> Problem</h3>
                    <p class="text-slate-600 text-xs md:text-sm leading-relaxed">Ã‡evresel regÃ¼lasyonlar nedeniyle R-410A yerini <strong>R-32</strong>'ye bÄ±rakÄ±yor. R-32 "DÃ¼ÅŸÃ¼k YanÄ±cÄ±" (A2L) sÄ±nÄ±fÄ±ndadÄ±r.</p>
                </div>
                <div class="bg-white p-5 md:p-6 rounded-2xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-slate-800 text-base md:text-lg mb-2 flex items-center gap-2"><div class="p-1.5 bg-green-100 rounded text-green-600"><i class="ri-checkbox-circle-fill"></i></div> Ã‡Ã¶zÃ¼m</h3>
                    <p class="text-slate-600 text-xs md:text-sm leading-relaxed">MQ-135 gibi hobi sensÃ¶rleri alkole alarm verir. Proje, <strong>filtreli endÃ¼striyel sensÃ¶rler</strong> (TGS2630) kullanÄ±r.</p>
                </div>
            </div>
        </section>

        <section id="s-analysis" class="hidden fade-in space-y-6">
            <div class="flex flex-col md:flex-row gap-6">
                <div class="w-full md:w-1/3 space-y-4">
                    <div class="bg-blue-600 rounded-2xl p-5 md:p-6 text-white shadow-lg shadow-blue-200">
                        <div class="flex items-center gap-3 mb-4">
                            <i class="ri-download-2-line text-2xl bg-white/20 p-2 rounded-lg"></i>
                            <div><h3 class="font-bold text-sm md:text-base">Fizik KuralÄ±</h3><p class="text-[10px] md:text-xs text-blue-100">R-32 YoÄŸunluÄŸu > Hava</p></div>
                        </div>
                        <p class="text-xs md:text-sm text-blue-50 leading-relaxed mb-4">SoÄŸutucu gazlar havadan aÄŸÄ±rdÄ±r. KaÃ§ak anÄ±nda gaz <strong>zemine Ã§Ã¶ker</strong>.</p>
                        <div class="bg-white/10 rounded-lg p-3 border border-white/20"><p class="text-xs font-semibold text-center flex items-center justify-center gap-2"><i class="ri-map-pin-line"></i> Montaj: Zeminden 30-50 cm</p></div>
                    </div>
                    <div class="bg-white rounded-2xl p-4 md:p-5 border border-slate-100 shadow-sm">
                        <div class="flex justify-between items-center mb-3"><h4 class="font-bold text-slate-700 text-sm">Hedef Gazlar</h4><span class="text-[10px] text-slate-400 flex items-center gap-1"><i class="ri-cursor-line"></i> Detay</span></div>
                        <div class="space-y-3">
                            <div onclick="app.toggleDetail('r410a')" class="cursor-pointer group">
                                <div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg group-hover:bg-slate-100 transition-colors">
                                    <div class="flex items-center gap-2"><i class="ri-arrow-down-s-line text-slate-400 group-hover:text-sky-500 transition-transform" id="icon-r410a"></i><span class="text-xs md:text-sm font-medium">R-410A</span></div><span class="text-[10px] bg-slate-200 px-2 py-1 rounded text-slate-600">YaygÄ±n</span>
                                </div>
                                <div id="info-r410a" class="details-content bg-slate-50/50 rounded-b-lg border-x border-b border-slate-100 mx-1"><div class="p-3 text-[11px] text-slate-600 leading-relaxed"><p><strong>Nedir?</strong> R-32 ve R-125 karÄ±ÅŸÄ±mÄ±. YanÄ±cÄ± deÄŸildir (A1) ama boÄŸucudur.</p></div></div>
                            </div>
                            <div onclick="app.toggleDetail('r32')" class="cursor-pointer group">
                                <div class="flex justify-between items-center p-3 bg-orange-50 rounded-lg border border-orange-100 group-hover:bg-orange-100 transition-colors">
                                    <div class="flex items-center gap-2"><i class="ri-arrow-down-s-line text-orange-400 group-hover:text-orange-600 transition-transform" id="icon-r32"></i><span class="text-xs md:text-sm font-bold text-orange-800">R-32</span></div><span class="text-[10px] bg-orange-200 text-orange-800 px-2 py-1 rounded font-bold">YanÄ±cÄ± (A2L)</span>
                                </div>
                                <div id="info-r32" class="details-content bg-orange-50/50 rounded-b-lg border-x border-b border-orange-100 mx-1"><div class="p-3 text-[11px] text-slate-700 leading-relaxed"><p><strong>Tehlike:</strong> LFL %14.4. KapalÄ± alanda patlayÄ±cÄ±dÄ±r. Erken tespit ÅŸarttÄ±r.</p></div></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="w-full md:w-2/3 bg-white rounded-2xl p-5 md:p-6 shadow-sm border border-slate-100">
                    <div class="flex justify-between items-center mb-4"><h3 class="font-bold text-base md:text-lg text-slate-800">SensÃ¶r Analizi</h3><span class="text-[10px] text-slate-400 bg-slate-50 px-2 py-1 rounded">Rapor BÃ¶lÃ¼m 3.4</span></div>
                    <div class="relative h-56 md:h-64 w-full mb-6"><canvas id="sensorChart"></canvas></div>
                    <div class="overflow-x-auto -mx-5 md:mx-0 px-5 md:px-0">
                        <table class="w-full text-xs md:text-sm text-left whitespace-nowrap md:whitespace-normal">
                            <thead class="bg-slate-50 text-slate-500 font-medium"><tr><th class="p-3 rounded-l-lg">Model</th><th class="p-3">Teknoloji</th><th class="p-3">Hata</th><th class="p-3 rounded-r-lg">Karar</th></tr></thead>
                            <tbody class="divide-y divide-slate-100">
                                <tr class="opacity-50"><td class="p-3 font-mono text-red-500 font-bold">MQ-135</td><td class="p-3">Hobi MOS</td><td class="p-3 text-red-500">YÃ¼ksek</td><td class="p-3"><span class="px-2 py-1 bg-red-100 text-red-700 rounded text-[10px] font-bold">RED</span></td></tr>
                                <tr class="bg-sky-50/50"><td class="p-3 font-mono font-bold text-sky-700">TGS 2630</td><td class="p-3">Filtreli MOS</td><td class="p-3 text-green-600">DÃ¼ÅŸÃ¼k</td><td class="p-3"><span class="px-2 py-1 bg-sky-100 text-sky-700 rounded text-[10px] font-bold">ONAY</span></td></tr>
                                <tr class="bg-amber-50/50"><td class="p-3 font-mono font-bold text-amber-700">MP510C</td><td class="p-3">Planar MOS</td><td class="p-3 text-amber-600">Orta</td><td class="p-3"><span class="px-2 py-1 bg-amber-100 text-amber-700 rounded text-[10px] font-bold">EKO</span></td></tr>
                                <tr><td class="p-3 font-mono text-slate-700">ZRT 510</td><td class="p-3">NDIR (IR)</td><td class="p-3 text-green-600">Yok</td><td class="p-3"><span class="px-2 py-1 bg-slate-100 text-slate-600 rounded text-[10px]">PAHALI</span></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <section id="s-hardware" class="hidden fade-in space-y-5">
            <div class="bg-white rounded-2xl p-5 md:p-6 shadow-sm border border-slate-100">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold text-slate-800 text-base md:text-lg">Sistem BileÅŸenleri (BOM)</h3>
                    <span class="text-[10px] text-slate-400 flex items-center gap-1"><i class="ri-cursor-line"></i> Detay</span>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div onclick="app.toggleDetail('esp32')" class="group p-4 rounded-xl border border-slate-200 bg-slate-50 transition-all hover:bg-white hover:shadow-md cursor-pointer h-fit">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center gap-3"><div class="w-10 h-10 bg-sky-100 rounded-lg flex items-center justify-center text-sky-600"><i class="ri-cpu-line text-xl"></i></div><div><h4 class="font-bold text-slate-700 text-sm">ESP32</h4><p class="text-[10px] text-slate-400">Ä°ÅŸlemci</p></div></div>
                            <i class="ri-arrow-down-s-line text-slate-300 group-hover:text-sky-500 transition-transform" id="icon-esp32"></i>
                        </div>
                        <div id="info-esp32" class="details-content border-t border-slate-200 mt-2 pt-2"><p class="text-[11px] text-slate-600"><strong>Neden?</strong> Dahili Wi-Fi/BT ve Ã§ift Ã§ekirdek. Arduino'dan Ã¼stÃ¼ndÃ¼r.<br><strong>Dikkat:</strong> 3.3V Logic seviyesi.</p></div>
                    </div>
                    <div onclick="app.toggleDetail('sensor')" class="group p-4 rounded-xl border-2 border-green-100 bg-green-50/30 relative cursor-pointer h-fit">
                        <div class="absolute top-3 right-3 w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center gap-3"><div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center text-green-600"><i class="ri-sensor-fill text-xl"></i></div><div><h4 class="font-bold text-slate-700 text-sm">Gaz SensÃ¶rÃ¼</h4><p class="text-[10px] text-green-600">TGS / MP510C</p></div></div>
                            <i class="ri-arrow-down-s-line text-green-400 group-hover:text-green-700 transition-transform" id="icon-sensor"></i>
                        </div>
                        <a href="https://www.ozdisan.com/p/gaz-sensorleri-915/figaro-tgs2600-433747?srsltid=AfmBOopCwS-_tUTd4Q2mtEGaD2QPb7GTyHJdHO-sErfnjeYIxzp-9r9m" target="_blank" onclick="event.stopPropagation();" class="block w-full py-2 bg-green-600 active:bg-green-700 text-white text-xs font-bold text-center rounded-lg shadow-sm mb-2"><i class="ri-shopping-cart-2-line"></i> Ã–zdisan'dan Al</a>
                        <div id="info-sensor" class="details-content border-t border-green-200 mt-2 pt-2"><p class="text-[11px] text-slate-600"><strong>Neden?</strong> Aktif karbon filtresi ile yanlÄ±ÅŸ alarmlarÄ± Ã¶nler. 5V ile Ã§alÄ±ÅŸÄ±r.</p></div>
                    </div>
                    <div onclick="app.toggleDetail('power')" class="group p-4 rounded-xl border border-slate-200 bg-slate-50 transition-all hover:bg-white hover:shadow-md cursor-pointer h-fit">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center gap-3"><div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center text-orange-600"><i class="ri-plug-line text-xl"></i></div><div><h4 class="font-bold text-slate-700 text-sm">GÃ¼Ã§ & SSR</h4><p class="text-[10px] text-slate-400">GÃ¼venlik</p></div></div>
                            <i class="ri-arrow-down-s-line text-slate-300 group-hover:text-orange-500 transition-transform" id="icon-power"></i>
                        </div>
                        <div id="info-power" class="details-content border-t border-slate-200 mt-2 pt-2"><p class="text-[11px] text-slate-600"><strong>Neden SSR?</strong> Mekanik rÃ¶le kÄ±vÄ±lcÄ±m Ã§Ä±karÄ±r, gaz ortamÄ±nda patlatÄ±r. Solid State Relay (SSR) kÄ±vÄ±lcÄ±msÄ±zdÄ±r.</p></div>
                    </div>
                </div>
            </div>
            <div class="bg-indigo-900 rounded-2xl p-5 md:p-6 text-indigo-100 relative overflow-hidden">
                <div class="flex flex-col md:flex-row gap-6 items-start md:items-center relative z-10">
                    <div class="flex-1">
                        <h3 class="font-bold text-white text-base md:text-lg mb-2 flex items-center gap-2"><i class="ri-tools-line"></i> 5V - 3.3V Uyumu</h3>
                        <p class="text-xs md:text-sm text-indigo-200 mb-3">SensÃ¶r 5V, ESP32 3.3V. <strong>Gerilim BÃ¶lÃ¼cÃ¼</strong> ÅŸart.</p>
                        <div class="inline-block bg-black/30 p-2.5 rounded-lg font-mono text-xs border border-indigo-500/30">V_esp = V_sensor * (R2 / (R1 + R2))</div>
                    </div>
                    <div class="w-full md:w-auto bg-white/10 p-3 rounded-xl border border-white/10 min-w-[200px]">
                        <h4 class="text-[10px] font-bold uppercase tracking-wider mb-2 text-indigo-300">BaÄŸlantÄ±</h4>
                        <div class="space-y-1.5 text-[10px] md:text-xs font-mono">
                            <div class="flex justify-between"><span>VCC</span> <span class="text-indigo-400">-></span> <span class="text-red-300">5V</span></div>
                            <div class="flex justify-between"><span>GND</span> <span class="text-indigo-400">-></span> <span>GND</span></div>
                            <div class="flex justify-between"><span>OUT</span> <span class="text-indigo-400">-></span> <span class="text-yellow-300">R1/R2</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="s-software" class="hidden fade-in space-y-6">
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                
                <div onclick="app.toggleDetail('code-over')" class="group bg-white p-5 rounded-2xl shadow-sm border border-slate-100 hover:border-violet-200 transition-all cursor-pointer h-fit">
                    <div class="flex justify-between items-start mb-3">
                        <div class="w-10 h-10 rounded-lg bg-violet-100 flex items-center justify-center text-violet-600"><i class="ri-functions-line text-xl"></i></div>
                        <i class="ri-code-s-slash-line text-slate-300 group-hover:text-violet-500 text-xl transition-colors"></i>
                    </div>
                    <h4 class="font-bold text-slate-800 text-sm mb-1">Oversampling</h4>
                    <p class="text-xs text-slate-500">Sinyal gÃ¼rÃ¼ltÃ¼sÃ¼nÃ¼ temizlemek iÃ§in ortalama alma.</p>
                    
                    <div id="info-code-over" class="details-content mt-3">
                        <pre><code>float sensorValue = 0;
for(int i=0; i<100; i++){
  sensorValue += analogRead(PIN);
  delay(1);
}
sensorValue /= 100.0;</code></pre>
                    </div>
                </div>

                <div onclick="app.toggleDetail('code-mqtt')" class="group bg-white p-5 rounded-2xl shadow-sm border border-slate-100 hover:border-sky-200 transition-all cursor-pointer h-fit">
                    <div class="flex justify-between items-start mb-3">
                        <div class="w-10 h-10 rounded-lg bg-sky-100 flex items-center justify-center text-sky-600"><i class="ri-cloud-line text-xl"></i></div>
                        <i class="ri-braces-line text-slate-300 group-hover:text-sky-500 text-xl transition-colors"></i>
                    </div>
                    <h4 class="font-bold text-slate-800 text-sm mb-1">MQTT & JSON</h4>
                    <p class="text-xs text-slate-500">Hafif veri paketi formatÄ±.</p>
                    
                    <div id="info-code-mqtt" class="details-content mt-3">
                        <pre><code>{
  "id": "Lab_Zemin_1",
  "r32_ppm": 450,
  "status": "NORMAL",
  "temp": 24.5
}</code></pre>
                        <p class="text-[10px] text-slate-400 mt-2 font-mono">Topic: uni/kampus/lab/sensor</p>
                    </div>
                </div>

                <div onclick="app.toggleDetail('code-app')" class="group bg-white p-5 rounded-2xl shadow-sm border border-slate-100 hover:border-green-200 transition-all cursor-pointer h-fit">
                    <div class="flex justify-between items-start mb-3">
                        <div class="w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center text-green-600"><i class="ri-smartphone-line text-xl"></i></div>
                        <i class="ri-notification-3-line text-slate-300 group-hover:text-green-500 text-xl transition-colors"></i>
                    </div>
                    <h4 class="font-bold text-slate-800 text-sm mb-1">Mobil App</h4>
                    <p class="text-xs text-slate-500">Firebase ile anlÄ±k tehlike bildirimi.</p>
                    
                    <div id="info-code-app" class="details-content mt-3 border-t border-slate-100 pt-2">
                        <ul class="text-[11px] text-slate-600 space-y-1">
                            <li><i class="ri-checkbox-circle-fill text-green-500"></i> Dashboard (CanlÄ±)</li>
                            <li><i class="ri-checkbox-circle-fill text-green-500"></i> GeÃ§miÅŸ Grafik</li>
                            <li><i class="ri-alarm-warning-fill text-red-500"></i> Push Notification</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                <h3 class="font-bold text-slate-800 text-base md:text-lg mb-6">12 HaftalÄ±k Plan</h3>
                
                <div class="relative border-l-2 border-slate-200 ml-3 space-y-8 pb-2">
                    <div onclick="app.toggleDetail('phase1')" class="group relative pl-8 cursor-pointer">
                        <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-2 border-sky-500 group-hover:scale-125 transition-transform"></div>
                        <div class="flex flex-col">
                            <span class="text-[10px] font-bold text-sky-500 uppercase tracking-wide">Hafta 1-2</span>
                            <h4 class="text-sm font-bold text-slate-700 group-hover:text-sky-600 transition-colors">AraÅŸtÄ±rma & Tedarik</h4>
                            <div id="info-phase1" class="details-content mt-2">
                                <ul class="text-xs text-slate-500 list-disc list-inside">
                                    <li>TGS2630 / MP510C sipariÅŸi</li>
                                    <li>ESP32 temini</li>
                                    <li>R-32 MSDS incelemesi</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div onclick="app.toggleDetail('phase2')" class="group relative pl-8 cursor-pointer">
                        <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-2 border-slate-300 group-hover:border-sky-500 transition-colors"></div>
                        <div class="flex flex-col">
                            <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wide">Hafta 3-5</span>
                            <h4 class="text-sm font-bold text-slate-700 group-hover:text-sky-600 transition-colors">Prototipleme</h4>
                            <div id="info-phase2" class="details-content mt-2">
                                <ul class="text-xs text-slate-500 list-disc list-inside">
                                    <li>Breadboard kurulumu</li>
                                    <li>Ã‡akmak gazÄ± ile "CanlÄ±lÄ±k" testi</li>
                                    <li>Analog okuma kalibrasyonu</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div onclick="app.toggleDetail('phase3')" class="group relative pl-8 cursor-pointer">
                        <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-2 border-slate-300 group-hover:border-sky-500 transition-colors"></div>
                        <div class="flex flex-col">
                            <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wide">Hafta 6-9</span>
                            <h4 class="text-sm font-bold text-slate-700 group-hover:text-sky-600 transition-colors">YazÄ±lÄ±m & IoT</h4>
                            <div id="info-phase3" class="details-content mt-2">
                                <ul class="text-xs text-slate-500 list-disc list-inside">
                                    <li>MQTT Broker kurulumu</li>
                                    <li>Flutter arayÃ¼z kodlamasÄ±</li>
                                    <li>Firebase bildirim entegrasyonu</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div onclick="app.toggleDetail('phase4')" class="group relative pl-8 cursor-pointer">
                        <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-2 border-slate-300 group-hover:border-sky-500 transition-colors"></div>
                        <div class="flex flex-col">
                            <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wide">Hafta 10-12</span>
                            <h4 class="text-sm font-bold text-slate-700 group-hover:text-sky-600 transition-colors">Saha Testi & Kutu</h4>
                            <div id="info-phase4" class="details-content mt-2">
                                <ul class="text-xs text-slate-500 list-disc list-inside">
                                    <li>PCB tasarÄ±mÄ±</li>
                                    <li>3D hava akÄ±ÅŸlÄ± kutu basÄ±mÄ±</li>
                                    <li>GerÃ§ek ortam pilot testi</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="s-ai" class="hidden fade-in h-[75vh] md:h-[600px] flex flex-col">
            <div class="bg-gradient-to-r from-indigo-600 to-violet-600 rounded-t-2xl md:rounded-t-3xl p-4 md:p-6 text-white shrink-0">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-white/20 rounded-lg backdrop-blur-sm">
                        <i class="ri-robot-2-fill text-xl"></i>
                    </div>
                    <div>
                        <h2 class="font-bold text-base md:text-lg">Proje AsistanÄ±</h2>
                        <p class="text-[10px] md:text-xs text-indigo-200">Teknik rapor verileriyle eÄŸitildi</p>
                    </div>
                </div>
            </div>
            
            <div class="flex-grow bg-white border-x border-b border-slate-200 shadow-sm rounded-b-2xl md:rounded-b-3xl flex flex-col overflow-hidden relative">
                <div id="chat-container" class="flex-grow overflow-y-auto p-4 space-y-4 bg-slate-50/50">
                    <div class="flex gap-3 fade-in">
                        <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 text-xs shrink-0"><i class="ri-robot-2-line"></i></div>
                        <div class="bubble-ai p-3 text-sm max-w-[85%] shadow-sm">
                            <p>Merhaba! ðŸ‘‹ Ben DÄ°REN teknik asistanÄ±yÄ±m.</p>
                            <p class="mt-2 text-slate-500 text-xs font-medium">Ã–rnek Sorular:</p>
                            <ul class="list-disc list-inside mt-1 text-slate-500 text-[10px] space-y-1">
                                <li>MQ-135 neden kullanÄ±lmaz?</li>
                                <li>SensÃ¶r baÄŸlantÄ± ÅŸemasÄ± nedir?</li>
                                <li>R-32 sensÃ¶rÃ¼ nereye takÄ±lÄ±r?</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="p-3 md:p-4 bg-white border-t border-slate-100">
                    <div class="flex gap-2 relative">
                        <input type="text" id="user-input" placeholder="Teknik bir soru sorun..." class="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all" onkeypress="if(event.key === 'Enter') app.askAI()">
                        <button onclick="app.askAI()" id="send-btn" class="bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 text-white rounded-xl px-4 transition-colors flex items-center justify-center">
                            <i class="ri-send-plane-fill"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <nav class="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 px-4 py-2 flex justify-between items-center z-50 pb-safe shadow-[0_-5px_15px_rgba(0,0,0,0.03)] safe-area-pb">
        <button onclick="app.nav('overview')" id="m-overview" class="nav-item flex flex-col items-center justify-center p-2 rounded-lg w-14 transition-colors">
            <i class="ri-home-4-line text-xl mb-0.5"></i>
            <span class="text-[9px] font-medium">Ã–zet</span>
        </button>
        <button onclick="app.nav('analysis')" id="m-analysis" class="nav-item flex flex-col items-center justify-center p-2 rounded-lg w-14 transition-colors">
            <i class="ri-flask-line text-xl mb-0.5"></i>
            <span class="text-[9px] font-medium">Gaz</span>
        </button>
        <button onclick="app.nav('ai')" id="m-ai" class="flex flex-col items-center justify-center w-14 -mt-8 relative z-10">
            <div class="w-12 h-12 bg-indigo-600 rounded-full flex items-center justify-center text-white shadow-lg shadow-indigo-300 border-4 border-white active:scale-95 transition-transform">
                <i class="ri-sparkling-fill text-xl"></i>
            </div>
            <span class="text-[9px] font-bold text-indigo-600 mt-1">Asistan</span>
        </button>
        <button onclick="app.nav('hardware')" id="m-hardware" class="nav-item flex flex-col items-center justify-center p-2 rounded-lg w-14 transition-colors">
            <i class="ri-cpu-line text-xl mb-0.5"></i>
            <span class="text-[9px] font-medium">DonanÄ±m</span>
        </button>
        <button onclick="app.nav('software')" id="m-software" class="nav-item flex flex-col items-center justify-center p-2 rounded-lg w-14 transition-colors">
            <i class="ri-code-s-slash-line text-xl mb-0.5"></i>
            <span class="text-[9px] font-medium">YazÄ±lÄ±m</span>
        </button>
    </nav>

    <script>
        // API KEY Python'dan buraya inject edilecek
        const API_KEY = ""; 

        const app = {
            chart: null,
            
            init: () => {
                app.initChart();
                app.nav('overview'); // BaÅŸlangÄ±Ã§ sayfasÄ±
            },

            nav: (id) => {
                document.querySelectorAll('section').forEach(el => {
                    el.classList.add('hidden');
                    el.classList.remove('fade-in');
                });
                const target = document.getElementById(`s-${id}`);
                target.classList.remove('hidden');
                void target.offsetWidth; 
                target.classList.add('fade-in');

                document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('active'));
                
                const dBtn = document.getElementById(`d-${id}`);
                const mBtn = document.getElementById(`m-${id}`);
                
                if(dBtn) dBtn.classList.add('active');
                if(mBtn) mBtn.classList.add('active');

                const aiBtn = document.getElementById('d-ai');
                if(id === 'ai') {
                    if(aiBtn) aiBtn.classList.replace('bg-indigo-600', 'bg-indigo-800');
                } else {
                    if(aiBtn) aiBtn.classList.replace('bg-indigo-800', 'bg-indigo-600');
                }

                window.scrollTo({top: 0, behavior: 'smooth'});
            },

            // --- TEK FONKSÄ°YON, TÃœM DETAYLAR ---
            toggleDetail: (id) => {
                const info = document.getElementById(`info-${id}`);
                const icon = document.getElementById(`icon-${id}`);
                
                if (info.classList.contains('open')) {
                    info.classList.remove('open');
                    if(icon) icon.style.transform = 'rotate(0deg)';
                } else {
                    info.classList.add('open');
                    if(icon) icon.style.transform = 'rotate(180deg)';
                }
            },

            initChart: () => {
                const ctx = document.getElementById('sensorChart').getContext('2d');
                app.chart = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['Hassasiyet', 'SeÃ§icilik', 'R-32 Uyumu', 'Maliyet', 'Ã–mÃ¼r'],
                        datasets: [
                            {
                                label: 'TGS 2630 (Ã–nerilen)',
                                data: [85, 90, 95, 60, 80],
                                backgroundColor: 'rgba(14, 165, 233, 0.2)',
                                borderColor: '#0ea5e9',
                                borderWidth: 2,
                                pointRadius: 2
                            },
                            {
                                label: 'MP510C (Ekonomik)',
                                data: [80, 60, 90, 80, 50],
                                backgroundColor: 'rgba(245, 158, 11, 0.2)', // Amber
                                borderColor: '#f59e0b',
                                borderWidth: 2,
                                pointRadius: 2
                            },
                            {
                                label: 'MQ-135 (Hobi)',
                                data: [40, 20, 30, 95, 40],
                                backgroundColor: 'rgba(239, 68, 68, 0.2)',
                                borderColor: '#ef4444',
                                borderWidth: 2,
                                pointRadius: 2
                            },
                            {
                                label: 'ZRT 510 (NDIR)', 
                                data: [95, 100, 100, 20, 95], // Maliyet puanÄ± dÃ¼ÅŸÃ¼k (PahalÄ±)
                                backgroundColor: 'rgba(100, 116, 139, 0.2)',
                                borderColor: '#64748b',
                                borderWidth: 1,
                                borderDash: [5, 5], 
                                pointRadius: 0
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                angleLines: { color: '#f1f5f9' },
                                grid: { color: '#e2e8f0' },
                                pointLabels: { font: { family: "'Inter', sans-serif", size: 10, weight: 600 }, color: '#64748b' },
                                ticks: { display: false, max: 100 }
                            }
                        },
                        plugins: {
                            legend: { position: 'bottom', labels: { usePointStyle: true, font: { size: 10 }, boxWidth: 8 } }
                        }
                    }
                });
            },

            addMsg: (text, sender) => {
                const container = document.getElementById('chat-container');
                const div = document.createElement('div');
                div.className = `flex gap-3 fade-in ${sender === 'user' ? 'flex-row-reverse' : ''}`;
                
                const icon = sender === 'ai' 
                    ? `<div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 text-xs shrink-0"><i class="ri-robot-2-line"></i></div>`
                    : `<div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-slate-500 text-xs shrink-0"><i class="ri-user-3-line"></i></div>`;
                
                const bubbleClass = sender === 'user' ? 'bubble-user' : 'bubble-ai';
                const content = sender === 'ai' ? marked.parse(text) : text;

                div.innerHTML = `${icon}<div class="${bubbleClass} p-3 text-sm max-w-[85%] shadow-sm overflow-hidden prose prose-sm max-w-none">${content}</div>`;
                container.appendChild(div);
                container.scrollTop = container.scrollHeight;
            },

            showTyping: () => {
                const container = document.getElementById('chat-container');
                const div = document.createElement('div');
                div.id = 'typing';
                div.className = 'flex gap-3 fade-in';
                div.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 text-xs shrink-0"><i class="ri-robot-2-line"></i></div>
                    <div class="bubble-ai p-3 shadow-sm flex gap-1 items-center h-10">
                        <div class="w-1.5 h-1.5 bg-slate-400 rounded-full typing-dot"></div>
                        <div class="w-1.5 h-1.5 bg-slate-400 rounded-full typing-dot"></div>
                        <div class="w-1.5 h-1.5 bg-slate-400 rounded-full typing-dot"></div>
                    </div>`;
                container.appendChild(div);
                container.scrollTop = container.scrollHeight;
            },

            askAI: async () => {
                const input = document.getElementById('user-input');
                const query = input.value.trim();
                if(!query) return;

                app.addMsg(query, 'user');
                input.value = '';
                input.disabled = true;
                app.showTyping();

                const systemPrompt = `Sen "DÄ°REN Projesi"nin teknik asistanÄ±sÄ±n. AÅŸaÄŸÄ±daki rapor verilerine gÃ¶re cevap ver:
                1. Proje AmacÄ±: Ãœniversitelerde R-32 ve R-410A gaz kaÃ§aklarÄ±nÄ± tespit etmek.
                2. SensÃ¶r: MQ serisi KESÄ°NLÄ°KLE yasak (alkol yanlÄ±ÅŸ alarmÄ±). Figaro TGS2630 (filtreli MOS) idealdir ancak MP510C (Planar MOS) de ekonomik alternatif olarak kullanÄ±labilir.
                3. DonanÄ±m: ESP32 (Wi-Fi iÃ§in), SSR RÃ¶le (kÄ±vÄ±lcÄ±m Ã¶nlemek iÃ§in), Harici 5V 2A adaptÃ¶r (gÃ¼Ã§ iÃ§in).
                4. Voltaj UyumsuzluÄŸu: SensÃ¶r 5V, ESP32 3.3V. Voltaj bÃ¶lÃ¼cÃ¼ (R1:2.2k, R2:3.3k) veya Logic Level Shifter ÅŸart.
                5. Montaj: Gaz havadan aÄŸÄ±r, sensÃ¶r zemine (30-50cm) monte edilmeli.
                CevaplarÄ±n kÄ±sa, teknik ve TÃ¼rkÃ§e olsun. Kod isterse Arduino/C++ ver.`;

                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${API_KEY}`, {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: query }] }],
                            systemInstruction: { parts: [{ text: systemPrompt }] }
                        })
                    });
                    
                    const data = await response.json();
                    const aiText = data.candidates?.[0]?.content?.parts?.[0]?.text || "BaÄŸlantÄ± sorunu.";
                    
                    document.getElementById('typing').remove();
                    app.addMsg(aiText, 'ai');
                } catch(e) {
                    document.getElementById('typing').remove();
                    app.addMsg("Hata oluÅŸtu. API key kontrol ediniz.", 'ai');
                } finally {
                    input.disabled = false;
                    input.focus();
                }
            }
        };

        document.addEventListener('DOMContentLoaded', app.init);
    </script>
</body>
</html>
